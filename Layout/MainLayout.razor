@using System.Globalization
@inherits LayoutComponentBase
@inject NavigationManager Nav
@inject IJSRuntime JS

<div class="page">
    <nav class="fixed top-0 left-0 w-full bg-transparent z-20">
        <div class="max-w-6xl mx-auto flex items-center justify-between px-6 h-32">

            <!-- Logo -->
            <a href="/" class="flex-shrink-0 h-full flex items-center">
                <img src="/images/logyx-logo.png"
                     alt="Logyx logo"
                     class="h-full w-auto transition-transform duration-200 hover:scale-105" />
            </a>

            <!-- Desktop menu -->
            <ul class="hidden md:flex items-center space-x-8">
                <li>
                    <a href="#services"
                       class="text-accent1 hover:text-accent2 transition">
                        Services
                    </a>
                </li>
                <li>
                    <a href="#about"
                       class="text-accent1 hover:text-accent2 transition">
                        About
                    </a>
                </li>
                <li>
                    <a href="#contact"
                       class="text-accent1 hover:text-accent2 transition">
                        Contact
                    </a>
                </li>
                <li>
                    <select class="border border-accent1 text-accent1 rounded p-1 text-sm
                 hover:border-accent2 hover:text-accent2 transition"
                            @onchange="ChangeCulture"
                            value="@currentCulture">
                        <option value="en">EN</option>
                        <option value="ru">RU</option>
                        <option value="ka">KA</option>
                    </select>
                </li>
            </ul>

            <!-- Mobile toggle -->
            <button class="md:hidden p-2 rounded hover:bg-gray-100 transition"
                    @onclick="ToggleMenu"
                    aria-label="Toggle menu">
                @if (!isMenuOpen)
                {
                    <!-- Hamburger -->
                    <svg class="w-6 h-6 text-accent1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                }
                else
                {
                    <!-- Close -->
                    <svg class="w-6 h-6 text-accent1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M6 18L18 6M6 6l12 12" />
                    </svg>
                }
            </button>
        </div>

        <!-- Mobile menu -->
        <div class="md:hidden bg-white transition-max-h duration-300 overflow-hidden"
             style="max-height:@(isMenuOpen ? "300px" : "0")">
            <ul class="flex flex-col px-6 py-4 space-y-4">
                <li>
                    <a href="#services"
                       class="text-accent1 hover:text-accent2 transition"
                       @onclick="ToggleMenu">
                        Services
                    </a>
                </li>
                <li>
                    <a href="#about"
                       class="text-accent1 hover:text-accent2 transition"
                       @onclick="ToggleMenu">
                        About
                    </a>
                </li>
                <li>
                    <a href="#contact"
                       class="text-accent1 hover:text-accent2 transition"
                       @onclick="ToggleMenu">
                        Contact
                    </a>
                </li>
                <li>
                    <select class="border border-accent1 text-accent1 rounded p-1 text-sm
                 hover:border-accent2 hover:text-accent2 transition"
                            @onchange="ChangeCulture"
                            value="@currentCulture">
                        <option value="en">EN</option>
                        <option value="ru">RU</option>
                        <option value="ka">KA</option>
                    </select>
                </li>
            </ul>
        </div>
    </nav>
    <main class="m-0 p-0 w-100">    
        <article class="m-0 p-0 w-100">
            @Body
        </article>
        <!-- Sticky Contact Bar -->
        <footer class="bg-accent1 text-white py-4">
            <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between px-6">
                <!-- Left side -->
                <div class="text-sm">
                    Logyx.tech © 2025 All rights reserved.
                </div>

                <!-- Right side -->
                <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-6">
                    <p class="text-sm">contact@yourcompany.com</p>
@*                     <a href="mailto:contact@yourcompany.com"
                       class="inline-block bg-white text-accent1 font-medium px-6 py-2 rounded-full
               hover:bg-gray-100 transition duration-200 text-sm">
                        Let's Talk
                    </a> *@
                </div>
            </div>
        </footer>
    </main>


    @code {
        private bool isMenuOpen;

        void ToggleMenu()
        {
            isMenuOpen = !isMenuOpen;
        }
        string currentCulture = CultureInfo.CurrentCulture.TwoLetterISOLanguageName;

        async Task ChangeCulture(ChangeEventArgs e)
        {
            var culture = e.Value.ToString();
            await JS.InvokeVoidAsync("localStorage.setItem", "blazorCulture", culture);
            Nav.NavigateTo(Nav.Uri, forceLoad: true);
        }
    }
</div>



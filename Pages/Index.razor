@page "/"
@using AccountingSoftware.Shared
@using System.ComponentModel.DataAnnotations
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<Index> L

<div class="flex flex-col min-h-screen bg-background text-text font-sans antialiased">

    <header class="relative w-full h-screen">
        <!-- 1) Full-bleed banner -->
        <div class="absolute inset-0 bg-[url('/images/background.png')] bg-center bg-cover bg-no-repeat"
             aria-hidden="true">
        </div>

        <!-- 2) Hero text on the left edge -->
        <div class="relative z-10 w-full h-full flex">
            <div class="flex-none    /* no grow, no shrink */
           w-[25%]  
           h-full
           flex flex-col justify-center items-start
           pt-8 pl-8 pr-6
           text-gray-900 text-left">

                <h3 class="hidden md:block text-5xl mb-4 leading-tight text-gray-700">
                    @L["HeroTitle"]
                </h3>

                <p class="hidden md:block text-xl mb-8 leading-relaxed text-gray-700">
                    @L["HeroSubtitle"]
                </p>

                <a href="#services"
                   class="hidden md:block inline-block bg-accent1 text-white font-medium py-3 px-8 rounded-full hover:bg-accent2 transition duration-200">
                    @L["ExploreServicesButton"]
                </a>
            </div>
        </div>
    </header>

    <!-- Services Grid -->
    <main id="services" class="py-16 px-6 bg-background">
        <h2 class="text-3xl font-semibold text-center mb-12">@L["OurServicesHeading"]</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">

            <ServiceCard Icon="bi-compass"
                         Title="@L["Service1_Title"]"
                         Description="@L["Service1_Description"]"
                         BackText="@L["Service1_BackText"]"
                         Link="@L["Service1_Link"]" />

            <ServiceCard Icon="bi-diagram-3"
                         Title="@L["Service2_Title"]"
                         Description="@L["Service2_Description"]"
                         BackText="@L["Service2_BackText"]"
                         Link="@L["Service2_Link"]" />

            <ServiceCard Icon="bi-cpu"
                         Title="@L["Service3_Title"]"
                         Description="@L["Service3_Description"]"
                         BackText="@L["Service3_BackText"]"
                         Link="@L["Service3_Link"]" />

            <ServiceCard Icon="bi-tools"
                         Title="@L["Service4_Title"]"
                         Description="@L["Service4_Description"]"
                         BackText="@L["Service4_BackText"]"
                         Link="@L["Service4_Link"]" />
        </div>
    </main>

    <!-- About Us -->
    <section id="about" class="py-16 px-6 bg-white">
        <div class="max-w-6xl mx-auto space-y-12">
            <!-- Intro -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div>
                    <img src="/images/about-us.jpg"
                         alt="@L["AboutSection_Title"] illustration"
                         class="w-full rounded-xl shadow-md" />
                </div>
                <div>
                    <h2 class="text-3xl font-bold mb-4">@L["AboutSection_Title"]</h2>
                    <p class="mb-4 text-gray-700 leading-relaxed">
                        @L["AboutParagraph1"]
                    </p>
                    <p class="mb-6 text-gray-700 leading-relaxed">
                        @L["AboutParagraph2"]
                    </p>
                    <a href="#contact"
                       class="inline-block bg-accent1 text-white font-medium py-2 px-6 rounded-full hover:bg-accent2 transition duration-200">
                        @L["GetInTouchButton"]
                    </a>
                </div>
            </div>

            <!-- Our Team -->
            <div>
                <h3 class="text-2xl font-semibold mb-6">@L["OurTeamHeading"]</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember1_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember1_Description"]</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember2_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember2_Description"]</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember3_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember3_Description"]</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember4_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember4_Description"]</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember5_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember5_Description"]</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-medium mb-1">@L["TeamMember6_Name"]</h4>
                        <p class="text-gray-700">@L["TeamMember6_Description"]</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-12 bg-background">
        <div class="max-w-6xl mx-auto px-6">
            <h2 class="text-2xl font-semibold text-center mb-8">
                @L["ContactSection_Title"]
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Map column -->
                <div class="h-80 w-full rounded-lg overflow-hidden shadow-md">
                    <iframe src="https://maps.google.com/maps?q=Tbilisi,Georgia&z=13&output=embed"
                            class="w-full h-full"
                            frameborder="0"
                            allowfullscreen
                            loading="lazy"></iframe>
                </div>

                <!-- Form column -->
                <div>
                    @if (contactSubmitted)
                    {
                        <div class="bg-green-100 border border-green-300 text-green-800 p-4 rounded mb-6">
                            @L["ThankYouMessage"]
                        </div>
                    }

                    <EditForm Model="contactModel"
                              OnValidSubmit="HandleContactSubmit"
                              class="space-y-4">
                        <DataAnnotationsValidator />

                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">
                                    @L["NameLabel"]
                                </label>
                                <InputText @bind-Value="contactModel.Name"
                                           class="w-full border rounded p-2 text-sm"
                                           placeholder="@L["NameLabel"]" />
                                <ValidationMessage For="@(() => contactModel.Name)"
                                                   class="text-red-600 text-xs mt-1" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">
                                    @L["EmailLabel"]
                                </label>
                                <InputText @bind-Value="contactModel.Email"
                                           type="email"
                                           class="w-full border rounded p-2 text-sm"
                                           placeholder="@L["EmailLabel"]" />
                                <ValidationMessage For="@(() => contactModel.Email)"
                                                   class="text-red-600 text-xs mt-1" />
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">
                                @L["SubjectLabel"]
                            </label>
                            <InputText @bind-Value="contactModel.Subject"
                                       class="w-full border rounded p-2 text-sm"
                                       placeholder="@L["SubjectLabel"]" />
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">
                                @L["MessageLabel"]
                            </label>
                            <InputTextArea @bind-Value="contactModel.Message"
                                           rows="4"
                                           class="w-full border rounded p-2 text-sm"
                                           placeholder="@L["MessageLabel"]" />
                            <ValidationMessage For="@(() => contactModel.Message)"
                                               class="text-red-600 text-xs mt-1" />
                        </div>

                        <div class="text-right">
                            <button type="submit"
                                    class="bg-accent1 text-white text-sm font-medium py-2 px-6 rounded hover:bg-accent2 transition">
                                @L["SendButton"]
                            </button>
                        </div>
                    </EditForm>
                </div>
            </div>
        </div>
    </section>


</div>

@code {
    bool contactSubmitted;
    ContactModel contactModel = new();

    void HandleContactSubmit()
    {
        // TODO: wire up API / email send here
        contactSubmitted = true;
        contactModel = new();
    }

    class ContactModel
    {
        [Required(ErrorMessageResourceName = "Validation_NameRequired", ErrorMessageResourceType = typeof(Pages.Index))]
        public string Name { get; set; }

        [Required(ErrorMessageResourceName = "Validation_EmailRequired", ErrorMessageResourceType = typeof(Pages.Index))]
        [EmailAddress(ErrorMessageResourceName = "Validation_EmailInvalid", ErrorMessageResourceType = typeof(Pages.Index))]
        public string Email { get; set; }

        public string Subject { get; set; }

        [Required(ErrorMessageResourceName = "Validation_MessageRequired", ErrorMessageResourceType = typeof(Pages.Index))]
        public string Message { get; set; }
    }
}
